<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeMind AI - Markets</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        body {
            background: var(--primary-dark);
            overflow-y: auto;
        }

        .markets-wrapper {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 250px;
            background: rgba(26, 26, 46, 0.95);
            border-right: 1px solid rgba(0, 212, 255, 0.3);
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-logo {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--neon-blue);
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 10px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(0, 212, 255, 0.1);
            color: var(--neon-blue);
        }

        .nav-icon {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 30px;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 2em;
            color: var(--text-primary);
        }

        .search-bar {
            display: flex;
            gap: 10px;
            flex: 1;
            max-width: 500px;
            margin: 0 20px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            background: rgba(15, 52, 96, 0.3);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--neon-blue);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .search-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--bright-blue), var(--neon-blue));
            border: none;
            border-radius: 25px;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        .market-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .index-card {
            background: rgba(26, 26, 46, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .index-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }

        .index-name {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .index-value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .index-change {
            font-size: 0.9em;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }

        .index-change.positive {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-green);
        }

        .index-change.negative {
            background: rgba(255, 68, 68, 0.2);
            color: var(--warning-red);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.2);
        }

        .tab {
            padding: 12px 25px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            font-weight: 600;
        }

        .tab:hover {
            color: var(--neon-blue);
        }

        .tab.active {
            color: var(--neon-blue);
            border-bottom-color: var(--neon-blue);
        }

        .chart-container {
            background: rgba(26, 26, 46, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .chart-symbol {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--text-primary);
        }

        .chart-price {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--text-primary);
        }

        .time-ranges {
            display: flex;
            gap: 10px;
        }

        .time-btn {
            padding: 8px 15px;
            background: rgba(15, 52, 96, 0.3);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85em;
        }

        .time-btn:hover, .time-btn.active {
            background: rgba(0, 212, 255, 0.2);
            color: var(--neon-blue);
            border-color: var(--neon-blue);
        }

        .chart-canvas {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            position: relative;
            padding: 10px;
        }

        .price-change {
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: 600;
        }

        .price-change.positive {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-green);
        }

        .price-change.negative {
            background: rgba(255, 68, 68, 0.2);
            color: var(--warning-red);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .buy-btn {
            flex: 1;
            padding: 15px;
            background: linear-gradient(135deg, #00aa00, var(--success-green));
            border: none;
            border-radius: 10px;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .buy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.4);
        }

        .sell-btn {
            flex: 1;
            padding: 15px;
            background: linear-gradient(135deg, #cc0000, var(--warning-red));
            border: none;
            border-radius: 10px;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sell-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 68, 68, 0.4);
        }

        .watchlist-btn {
            padding: 15px 30px;
            background: rgba(15, 52, 96, 0.3);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            color: var(--neon-blue);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .watchlist-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--neon-blue);
        }

        .watchlist-btn.added {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--neon-blue);
        }

        .stocks-section {
            background: rgba(26, 26, 46, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            color: var(--text-primary);
            font-size: 1.3em;
            font-weight: 600;
        }

        .stocks-table {
            width: 100%;
            border-collapse: collapse;
        }

        .stocks-table thead {
            border-bottom: 2px solid rgba(0, 212, 255, 0.3);
        }

        .stocks-table th {
            color: var(--text-secondary);
            font-size: 0.85em;
            text-align: left;
            padding: 15px 12px;
            font-weight: 600;
        }

        .stocks-table td {
            color: var(--text-primary);
            padding: 15px 12px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
        }

        .stocks-table tbody tr {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stocks-table tbody tr:hover {
            background: rgba(0, 212, 255, 0.05);
        }

        .stock-symbol {
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-name {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 20px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--success-green);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .live-text {
            color: var(--success-green);
            font-size: 0.85em;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main-content {
                margin-left: 0;
            }

            .page-header {
                flex-direction: column;
                gap: 15px;
            }

            .search-bar {
                max-width: 100%;
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <div class="markets-wrapper">
        <aside class="sidebar">
            <div class="sidebar-logo">TradeMind AI</div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="dashboard.html" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="markets.html" class="nav-link active">
                        <span class="nav-icon">üíπ</span>
                        Markets
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üìà</span>
                        Portfolio
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">ü§ñ</span>
                        AI Analysis
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">üì∞</span>
                        News
                    </a>
                </li>
                <li class="nav-item">
                    <a href="profile.html" class="nav-link">
                        <span class="nav-icon">üë§</span>
                        Profile
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        Settings
                    </a>
                </li>
                <li class="nav-item">
                    <a href="index.html" class="nav-link" id="logoutBtn">
                        <span class="nav-icon">üö™</span>
                        Logout
                    </a>
                </li>
            </ul>
        </aside>

        <main class="main-content">
            <div class="page-header">
                <h1 class="page-title">üìà Markets</h1>
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search stocks (e.g., AAPL, TSLA, MSFT...)">
                    <button class="search-btn" onclick="searchStock()">üîç Search</button>
                </div>
                <div class="live-indicator">
                    <div class="live-dot"></div>
                    <span class="live-text">LIVE</span>
                </div>
            </div>

            <div class="market-overview">
                <div class="index-card">
                    <div class="index-name">S&P 500</div>
                    <div class="index-value">4,783.45</div>
                    <span class="index-change positive">‚Üë +1.24%</span>
                </div>
                <div class="index-card">
                    <div class="index-name">Dow Jones</div>
                    <div class="index-value">37,404.35</div>
                    <span class="index-change positive">‚Üë +0.82%</span>
                </div>
                <div class="index-card">
                    <div class="index-name">NASDAQ</div>
                    <div class="index-value">14,963.87</div>
                    <span class="index-change positive">‚Üë +1.68%</span>
                </div>
                <div class="index-card">
                    <div class="index-name">Russell 2000</div>
                    <div class="index-value">2,027.56</div>
                    <span class="index-change negative">‚Üì -0.43%</span>
                </div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('all')">All Stocks</button>
                <button class="tab" onclick="switchTab('watchlist')">My Watchlist</button>
                <button class="tab" onclick="switchTab('trending')">Trending</button>
                <button class="tab" onclick="switchTab('gainers')">Top Gainers</button>
                <button class="tab" onclick="switchTab('losers')">Top Losers</button>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <div class="chart-info">
                        <div class="chart-symbol" id="chartSymbol">AAPL</div>
                        <div>
                            <div class="chart-price" id="chartPrice">$182.50</div>
                            <span class="price-change positive" id="chartChange">‚Üë +$4.20 (+2.36%)</span>
                        </div>
                    </div>
                    <div class="time-ranges">
                        <button class="time-btn" onclick="changeTimeRange('1D')">1D</button>
                        <button class="time-btn" onclick="changeTimeRange('1W')">1W</button>
                        <button class="time-btn active" onclick="changeTimeRange('1M')">1M</button>
                        <button class="time-btn" onclick="changeTimeRange('3M')">3M</button>
                        <button class="time-btn" onclick="changeTimeRange('1Y')">1Y</button>
                        <button class="time-btn" onclick="changeTimeRange('ALL')">ALL</button>
                    </div>
                </div>
                <div class="chart-canvas">
                    <canvas id="priceChart"></canvas>
                </div>
                <div class="action-buttons">
                    <button class="buy-btn" onclick="buyStock()">üìä BUY</button>
                    <button class="sell-btn" onclick="sellStock()">üìâ SELL</button>
                    <button class="watchlist-btn" id="watchlistBtn" onclick="toggleWatchlist()">‚≠ê Add to Watchlist</button>
                </div>
            </div>

            <div class="stocks-section">
                <div class="section-header">
                    <h2 class="section-title">üìä Live Stock Prices</h2>
                </div>
                
                <table class="stocks-table">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Company Name</th>
                            <th>Price</th>
                            <th>Change</th>
                            <th>Change %</th>
                            <th>Volume</th>
                            <th>Market Cap</th>
                        </tr>
                    </thead>
                    <tbody id="stocksTableBody">
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <script>
        let priceChart = null;
        
        const stocksData = [
            { symbol: 'AAPL', name: 'Apple Inc.', price: 182.50, change: 4.20, changePercent: 2.36, volume: '54.2M', marketCap: '$2.87T' },
            { symbol: 'MSFT', name: 'Microsoft Corp.', price: 395.20, change: 5.80, changePercent: 1.49, volume: '23.1M', marketCap: '$2.93T' },
            { symbol: 'GOOGL', name: 'Alphabet Inc.', price: 141.80, change: -1.20, changePercent: -0.84, volume: '18.5M', marketCap: '$1.76T' },
            { symbol: 'AMZN', name: 'Amazon.com Inc.', price: 178.35, change: 3.15, changePercent: 1.80, volume: '42.8M', marketCap: '$1.84T' },
            { symbol: 'TSLA', name: 'Tesla Inc.', price: 238.20, change: -7.60, changePercent: -3.09, volume: '98.7M', marketCap: '$755B' },
            { symbol: 'NVDA', name: 'NVIDIA Corp.', price: 502.80, change: 17.50, changePercent: 3.61, volume: '35.4M', marketCap: '$1.24T' },
            { symbol: 'META', name: 'Meta Platforms', price: 468.90, change: 8.45, changePercent: 1.84, volume: '12.3M', marketCap: '$1.19T' },
            { symbol: 'JPM', name: 'JPMorgan Chase', price: 185.65, change: 2.35, changePercent: 1.28, volume: '8.9M', marketCap: '$543B' }
        ];

        function populateStocksTable(stocks = stocksData) {
            const tbody = document.getElementById('stocksTableBody');
            tbody.innerHTML = '';
            
            stocks.forEach(stock => {
                const changeClass = stock.change >= 0 ? 'positive' : 'negative';
                const changeSymbol = stock.change >= 0 ? '‚Üë' : '‚Üì';
                
                const row = document.createElement('tr');
                row.onclick = function() {
                    selectStock(stock.symbol, stock.price, stock.change, stock.changePercent);
                };
                
                row.innerHTML = `
                    <td class="stock-symbol">${stock.symbol}</td>
                    <td>
                        <div>${stock.name}</div>
                        <div class="stock-name">Technology</div>
                    </td>
                    <td>$${stock.price.toFixed(2)}</td>
                    <td style="color: ${stock.change >= 0 ? 'var(--success-green)' : 'var(--warning-red)'}">
                        ${changeSymbol} $${Math.abs(stock.change).toFixed(2)}
                    </td>
                    <td>
                        <span class="price-change ${changeClass}">
                            ${changeSymbol} ${Math.abs(stock.changePercent).toFixed(2)}%
                        </span>
                    </td>
                    <td>${stock.volume}</td>
                    <td>${stock.marketCap}</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function selectStock(symbol, price, change, changePercent) {
            document.getElementById('chartSymbol').textContent = symbol;
            document.getElementById('chartPrice').textContent = '$' + price.toFixed(2);
            
            const changeClass = change >= 0 ? 'positive' : 'negative';
            const changeSymbol = change >= 0 ? '‚Üë' : '‚Üì';
            const chartChangeEl = document.getElementById('chartChange');
            chartChangeEl.className = 'price-change ' + changeClass;
            chartChangeEl.textContent = changeSymbol + ' $' + Math.abs(change).toFixed(2) + ' (' + changeSymbol + Math.abs(changePercent).toFixed(2) + '%)';
            
            drawChart(symbol, change >= 0);
            
            const watchlist = JSON.parse(localStorage.getItem('watchlist') || '[]');
            const btn = document.getElementById('watchlistBtn');
            if (watchlist.includes(symbol)) {
                btn.classList.add('added');
                btn.textContent = '‚òÖ In Watchlist';
            } else {
                btn.classList.remove('added');
                btn.textContent = '‚≠ê Add to Watchlist';
            }
        }

        function drawChart(symbol, isPositive) {
            const canvas = document.getElementById('priceChart');
            const ctx = canvas.getContext('2d');
            
            if (priceChart) {
                priceChart.destroy();
            }
            
            const timeRange = document.querySelector('.time-btn.active')?.textContent || '1M';
            const dataPoints = 30;
            
            const labels = [];
            const data = [];
            const basePrice = stocksData.find(s => s.symbol === symbol)?.price || 100;
            let price = basePrice * 0.95;
            
            for (let i = 0; i < dataPoints; i++) {
                const volatility = 0.02;
                const trend = isPositive ? 0.001 : -0.001;
                const randomChange = (Math.random() - 0.5) * 2 * volatility;
                price = price * (1 + trend + randomChange);
                
                data.push(price);
                labels.push('Day ' + (i + 1));
            }
            
            const config = {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: symbol,
                        data: data,
                        borderColor: isPositive ? '#00ff88' : '#ff4444',
                        backgroundColor: isPositive ? 'rgba(0, 255, 136, 0.1)' : 'rgba(255, 68, 68, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(26, 26, 46, 0.95)',
                            titleColor: '#00d4ff',
                            bodyColor: '#ffffff',
                            callbacks: {
                                label: function(context) {
                                    return '$' + context.parsed.y.toFixed(2);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 212, 255, 0.1)'
                            },
                            ticks: {
                                color: '#b3b3b3'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(0, 212, 255, 0.1)'
                            },
                            ticks: {
                                color: '#b3b3b3',
                                callback: function(value) {
                                    return '$' + value.toFixed(2);
                                }
                            }
                        }
                    }
                }
            };
            
            priceChart = new Chart(ctx, config);
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'watchlist') {
                const watchlist = JSON.parse(localStorage.getItem('watchlist') || '[]');
                const watchlistStocks = stocksData.filter(s => watchlist.includes(s.symbol));
                populateStocksTable(watchlistStocks);
            } else if (tab === 'gainers') {
                const gainers = [...stocksData].sort((a, b) => b.changePercent - a.changePercent);
                populateStocksTable(gainers);
            } else if (tab === 'losers') {
                const losers = [...stocksData].sort((a, b) => a.changePercent - b.changePercent);
                populateStocksTable(losers);
            } else {
                populateStocksTable(stocksData);
            }
        }

        function changeTimeRange(range) {
            document.querySelectorAll('.time-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const symbol = document.getElementById('chartSymbol').textContent;
            const stock = stocksData.find(s => s.symbol === symbol);
            if (stock) {
                drawChart(symbol, stock.change >= 0);
            }
        }

        function toggleWatchlist() {
            const btn = document.getElementById('watchlistBtn');
            const symbol = document.getElementById('chartSymbol').textContent;
            let watchlist = JSON.parse(localStorage.getItem('watchlist') || '[]');
            
            if (watchlist.includes(symbol)) {
                watchlist = watchlist.filter(s => s !== symbol);
                btn.classList.remove('added');
                btn.textContent = '‚≠ê Add to Watchlist';
                alert(symbol + ' removed from watchlist');
            } else {
                watchlist.push(symbol);
                btn.classList.add('added');
                btn.textContent = '‚òÖ In Watchlist';
                alert(symbol + ' added to watchlist');
            }
            
            localStorage.setItem('watchlist', JSON.stringify(watchlist));
        }

        function buyStock() {
            const symbol = document.getElementById('chartSymbol').textContent;
            const price = document.getElementById('chartPrice').textContent;
            alert('Buy order placed for ' + symbol + ' at ' + price);
        }

        function sellStock() {
            const symbol = document.getElementById('chartSymbol').textContent;
            const price = document.getElementById('chartPrice').textContent;
            alert('Sell order placed for ' + symbol + ' at ' + price);
        }
        function searchStock() {
            const term = document.getElementById('searchInput').value.trim().toUpperCase();

            if (!term) {
                populateStocksTable(stocksData);
                return;
            }

            const results = stocksData.filter(
                s =>
                    s.symbol.includes(term) ||
                    s.name.toUpperCase().includes(term)
            );

            if (results.length === 0) {
                alert('No stocks found for: ' + term);
            } else {
                populateStocksTable(results);
            }
        }

        
        window.onload = () => {
            populateStocksTable();
            selectStock('AAPL', 182.5, 4.2, 2.36);
        };
</script>
